---
source: tests/command_tests.rs
info:
  program: artifacts-cli
  args:
    - generate
    - /home/palo/dev/nixos/nixos-artifacts/pkgs/artifacts-tui/examples/scenario_simple/backend.toml
    - /home/palo/dev/nixos/nixos-artifacts/pkgs/artifacts-tui/examples/scenario_simple/make.json
  env:
    ARTIFACTS_TUI_TEST_FIXED_TMP: "1"
    TMPDIR: /tmp/artifacts-tui-ci
---
success: true
exit_code: 0
----- stdout -----
[generate] backend: /home/palo/dev/nixos/nixos-artifacts/pkgs/artifacts-tui/examples/scenario_simple/backend.toml
[generate] make: /home/palo/dev/nixos/nixos-artifacts/pkgs/artifacts-tui/examples/scenario_simple/make.json
[generate] prompts dir: /tmp/artifacts-tui-ci/artifacts-tui-test/prompts
[generate] out dir: /tmp/artifacts-tui-ci/artifacts-tui-test/out
[generate] machine: machine-name
  - artifact: test-artifact
    prompts to collect -> 1 entries
      - secret (Output directory path)
    files to produce -> 2 files
      - very-simple-secrets => /run/secrets/very-simple-secrets
      - simple-secrets => /run/secrets/simple-secrets owner=deployer group=deployer
    running check_serialization: env inputs="/tmp/artifacts-tui-ci/artifacts-tui-test-test_artifact-inputs" machine="machine-name" artifact="test-artifact" /home/palo/dev/nixos/nixos-artifacts/pkgs/artifacts-tui/examples/scenario_simple/test_check.sh
    check_serialization: failed with status exit status: 1 -> continuing with generation
    would run generator: env prompt="/tmp/artifacts-tui-ci/artifacts-tui-test/prompts" out="/tmp/artifacts-tui-ci/artifacts-tui-test/out" /home/palo/dev/nixos/nixos-artifacts/pkgs/artifacts-tui/examples/scenario_simple/test_generator.sh

    generator script path: /home/palo/dev/nixos/nixos-artifacts/pkgs/artifacts-tui/examples/scenario_simple/test_generator.sh
    generator script content:
#!/usr/bin/env bash

cat $prompt/secret > $out/very-simple-secrets
cat $prompt/secret > $out/simple-secrets

    would run serialize: env out="/tmp/artifacts-tui-ci/artifacts-tui-test/out" machine="machine-name" artifact="test-artifact" /home/palo/dev/nixos/nixos-artifacts/pkgs/artifacts-tui/examples/scenario_simple/test_serialize.sh

    serialize script path: /home/palo/dev/nixos/nixos-artifacts/pkgs/artifacts-tui/examples/scenario_simple/test_serialize.sh
    serialize script content:
#!/usr/bin/env bash

echo "$out"
ls "$out"

----- stderr -----
